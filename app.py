import streamlit as st
import pandas as pd
import pydeck as pdk
from abc import ABC, abstractmethod
import random

# ================== CONFIG ==================

st.set_page_config(
    page_title="üåç –¢—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏ –ø–ª–∞–Ω–µ—Ä",
    page_icon="üß≠",
    layout="wide"
)

# ================== STYLE ==================

# –í—Å–∏—á–∫–∏ —Å–Ω–∏–º–∫–∏ —â–µ —Å–∞ —Å –µ–¥–Ω–∞–∫–≤–∞ –≤–∏—Å–æ—á–∏–Ω–∞ –∏ –æ–±–µ–∫—Ç—ä—Ç —â–µ —Å–µ –ø–æ–±–∏—Ä–∞ –¥–æ–±—Ä–µ
st.markdown("""
<style>
img {
    max-height: 300px;
    object-fit: cover;
}
</style>
""", unsafe_allow_html=True)

# ================== DATA ==================

DESTINATIONS = {
    "üá©üá™ –ì–µ—Ä–º–∞–Ω–∏—è": [
        ("–ë–µ—Ä–ª–∏–Ω", "–ö—ä—Ä–∏–≤—É—Ä—Å—Ç"),
        ("–ú—é–Ω—Ö–µ–Ω", "–ë–∞–≤–∞—Ä—Å–∫–∏ –Ω–∞–¥–µ–Ω–∏—á–∫–∏"),
        ("–•–∞–º–±—É—Ä–≥", "–†–∏–±–Ω–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Ç–µ—Ç–∏"),
        ("–ö—å–æ–ª–Ω", "–ù–µ–º—Å–∫–∞ –±–∏—Ä–∞ –∏ –±—Ä–µ—Ü–µ–ª–∏"),
    ],
    "üá´üá∑ –§—Ä–∞–Ω—Ü–∏—è": [
        ("–ü–∞—Ä–∏–∂", "–ö—Ä–æ–∞—Å–∞–Ω –∏ –±–∞–≥–µ—Ç–∞"),
        ("–õ–∏–æ–Ω", "–ë—å–æ—Ñ –ë—É—Ä–≥–∏–Ω—å–æ–Ω"),
        ("–ú–∞—Ä—Å–∏–ª–∏—è", "–ë—É—è–±–µ—Å"),
        ("–ù–∏—Ü–∞", "–°–∞–ª–∞—Ç–∞ –ù–∏—Å–æ–∞–∑"),
    ],
    "üáÆüáπ –ò—Ç–∞–ª–∏—è": [
        ("–†–∏–º", "–ö–∞—Ä–±–æ–Ω–∞—Ä–∞"),
        ("–§–ª–æ—Ä–µ–Ω—Ü–∏—è", "–¢–æ—Å–∫–∞–Ω—Å–∫–∞ –∫—É—Ö–Ω—è"),
        ("–í–µ–Ω–µ—Ü–∏—è", "–ú–æ—Ä—Å–∫–∏ –¥–∞—Ä–æ–≤–µ"),
        ("–ú–∏–ª–∞–Ω–æ", "–†–∏–∑–æ—Ç–æ"),
    ],
    "üá™üá∏ –ò—Å–ø–∞–Ω–∏—è": [
        ("–ë–∞—Ä—Å–µ–ª–æ–Ω–∞", "–ü–∞–µ–ª—è"),
        ("–ú–∞–¥—Ä–∏–¥", "–•–∞–º–æ–Ω"),
        ("–í–∞–ª–µ–Ω—Å–∏—è", "–¢–∞–ø–∞—Å"),
        ("–°–µ–≤–∏–ª—è", "–ì–∞–∑–ø–∞—á–æ"),
    ],
    "üá¨üá∑ –ì—ä—Ä—Ü–∏—è": [
        ("–°–æ–ª—É–Ω", "–ì–∏—Ä–æ—Å"),
        ("–ê—Ç–∏–Ω–∞", "–ú—É—Å–∞–∫–∞"),
        ("–°–∞–Ω—Ç–æ—Ä–∏–Ω–∏", "–ú–æ—Ä—Å–∫–∞ –∫—É—Ö–Ω—è"),
    ],
    "üá¶üáπ –ê–≤—Å—Ç—Ä–∏—è": [
        ("–í–∏–µ–Ω–∞", "–í–∏–µ–Ω—Å–∫–∏ —à–Ω–∏—Ü–µ–ª"),
        ("–ó–∞–ª—Ü–±—É—Ä–≥", "–©—Ä—É–¥–µ–ª"),
        ("–ò–Ω—Å–±—Ä—É–∫", "–ê–ª–ø–∏–π—Å–∫–∞ –∫—É—Ö–Ω—è"),
    ],
    "üá®üáø –ß–µ—Ö–∏—è": [
        ("–ü—Ä–∞–≥–∞", "–ì—É–ª–∞—à"),
        ("–ë—ä—Ä–Ω–æ", "–ß–µ—à–∫–∞ –∫—É—Ö–Ω—è"),
    ],
    "üá≥üá± –ù–∏–¥–µ—Ä–ª–∞–Ω–¥–∏—è": [
        ("–ê–º—Å—Ç–µ—Ä–¥–∞–º", "–•–µ—Ä–∏–Ω–≥–∞"),
        ("–†–æ—Ç–µ—Ä–¥–∞–º", "–ú–æ—Ä—Å–∫–∏ –¥–∞—Ä–æ–≤–µ"),
    ],
    "üá∏üá™ –®–≤–µ—Ü–∏—è": [
        ("–°—Ç–æ–∫—Ö–æ–ª–º", "–ö—é—Ñ—Ç–µ—Ç–∞"),
        ("–ì—å–æ—Ç–µ–±–æ—Ä–≥", "–†–∏–±–µ–Ω–∞ —Å—É–ø–∞"),
    ],
    "üá≠üá∑ –•—ä—Ä–≤–∞—Ç–∏—è": [
        ("–ó–∞–≥—Ä–µ–±", "–ë–∞–ª–∫–∞–Ω—Å–∫–∞ –∫—É—Ö–Ω—è"),
        ("–°–ø–ª–∏—Ç", "–ú–æ—Ä—Å–∫–∏ –¥–∞—Ä–æ–≤–µ"),
        ("–î—É–±—Ä–æ–≤–Ω–∏–∫", "–î–∞–ª–º–∞—Ç–∏–Ω—Å–∫–∞ –∫—É—Ö–Ω—è"),
    ],
    "üáµüáπ –ü–æ—Ä—Ç—É–≥–∞–ª–∏—è": [
        ("–õ–∏—Å–∞–±–æ–Ω", "–ë–∞–∫–∞–ª—è—É"),
        ("–ü–æ—Ä—Ç–æ", "–§—Ä–∞–Ω—Å–µ–∑–∏–Ω—è"),
        ("–§–∞—Ä–æ", "–ú–æ—Ä—Å–∫–∏ –¥–∞—Ä–æ–≤–µ"),
    ],
    "üáµüá± –ü–æ–ª—à–∞": [
        ("–í–∞—Ä—à–∞–≤–∞", "–ü–∏–µ—Ä–æ–≥–∏"),
        ("–ö—Ä–∞–∫–æ–≤", "–ñ—É—Ä–µ–∫"),
        ("–ì–¥–∞–Ω—Å–∫", "–†–∏–±–Ω–∏ —è—Å—Ç–∏—è"),
    ],
    "üá≠üá∫ –£–Ω–≥–∞—Ä–∏—è": [
        ("–ë—É–¥–∞–ø–µ—â–∞", "–ì—É–ª–∞—à"),
        ("–î–µ–±—Ä–µ—Ü–µ–Ω", "–£–Ω–≥–∞—Ä—Å–∫–∞ –Ω–∞–¥–µ–Ω–∏—Ü–∞"),
    ],
    "üá®üá≠ –®–≤–µ–π—Ü–∞—Ä–∏—è": [
        ("–¶—é—Ä–∏—Ö", "–§–æ–Ω–¥—é"),
        ("–ñ–µ–Ω–µ–≤–∞", "–†–∞–∫–ª–µ—Ç"),
        ("–ë–µ—Ä–Ω", "–®–≤–µ–π—Ü–∞—Ä—Å–∫–∞ –∫—É—Ö–Ω—è"),
    ],
    "üáßüá™ –ë–µ–ª–≥–∏—è": [
        ("–ë—Ä—é–∫—Å–µ–ª", "–ì–æ—Ñ—Ä–µ—Ç–∏"),
        ("–ë—Ä—é–∂", "–ú–∏–¥–∏ —Å –ø—ä—Ä–∂–µ–Ω–∏ –∫–∞—Ä—Ç–æ—Ñ–∏"),
        ("–ê–Ω—Ç–≤–µ—Ä–ø–µ–Ω", "–ë–µ–ª–≥–∏–π—Å–∫–∏ —à–æ–∫–æ–ª–∞–¥"),
    ],
    "üá∑üá¥ –†—É–º—ä–Ω–∏—è": [
        ("–ë—É–∫—É—Ä–µ—â", "–°–∞—Ä–º–∏"),
        ("–ë—Ä–∞—à–æ–≤", "–¢—Ä–∞–Ω—Å–∏–ª–≤–∞–Ω—Å–∫–∞ –∫—É—Ö–Ω—è"),
        ("–ö–ª—É–∂-–ù–∞–ø–æ–∫–∞", "–ú–µ—Å—Ç–Ω–∏ —Å–ø–µ—Ü–∏–∞–ª–∏—Ç–µ—Ç–∏"),
    ],
    "üá©üá∞ –î–∞–Ω–∏—è": [
        ("–ö–æ–ø–µ–Ω—Ö–∞–≥–µ–Ω", "–°–º—å–æ—Ä–µ–±—Ä—å–æ–¥"),
        ("–û—Ä—Ö—É—Å", "–°–∫–∞–Ω–¥–∏–Ω–∞–≤—Å–∫–∞ –∫—É—Ö–Ω—è"),
    ]
}

CITY_COORDS = {
    "–°–æ—Ñ–∏—è": [42.6977, 23.3219],
    "–ë–µ—Ä–ª–∏–Ω": [52.5200, 13.4050],
    "–ú—é–Ω—Ö–µ–Ω": [48.1351, 11.5820],
    "–•–∞–º–±—É—Ä–≥": [53.5488, 9.9872],
    "–ö—å–æ–ª–Ω": [50.9375, 6.9603],
    "–ü–∞—Ä–∏–∂": [48.8566, 2.3522],
    "–õ–∏–æ–Ω": [45.7640, 4.8357],
    "–ú–∞—Ä—Å–∏–ª–∏—è": [43.2965, 5.3698],
    "–ù–∏—Ü–∞": [43.7102, 7.2620],
    "–†–∏–º": [41.9028, 12.4964],
    "–§–ª–æ—Ä–µ–Ω—Ü–∏—è": [43.7696, 11.2558],
    "–í–µ–Ω–µ—Ü–∏—è": [45.4408, 12.3155],
    "–ú–∏–ª–∞–Ω–æ": [45.4642, 9.1900],
    "–ë–∞—Ä—Å–µ–ª–æ–Ω–∞": [41.3851, 2.1734],
    "–ú–∞–¥—Ä–∏–¥": [40.4168, -3.7038],
    "–í–∞–ª–µ–Ω—Å–∏—è": [39.4699, -0.3763],
    "–°–µ–≤–∏–ª—è": [37.3891, -5.9845],
    "–°–æ–ª—É–Ω": [40.6401, 22.9444],
    "–ê—Ç–∏–Ω–∞": [37.9838, 23.7275],
    "–°–∞–Ω—Ç–æ—Ä–∏–Ω–∏": [36.3932, 25.4615],
    "–í–∏–µ–Ω–∞": [48.2082, 16.3738],
    "–ó–∞–ª—Ü–±—É—Ä–≥": [47.8095, 13.0550],
    "–ò–Ω—Å–±—Ä—É–∫": [47.2692, 11.4041],
    "–ü—Ä–∞–≥–∞": [50.0755, 14.4378],
    "–ë—ä—Ä–Ω–æ": [49.1951, 16.6068],
    "–ê–º—Å—Ç–µ—Ä–¥–∞–º": [52.3676, 4.9041],
    "–†–æ—Ç–µ—Ä–¥–∞–º": [51.9244, 4.4777],
    "–°—Ç–æ–∫—Ö–æ–ª–º": [59.3293, 18.0686],
    "–ì—å–æ—Ç–µ–±–æ—Ä–≥": [57.7089, 11.9746],
    "–ó–∞–≥—Ä–µ–±": [45.8150, 15.9819],
    "–°–ø–ª–∏—Ç": [43.5081, 16.4402],
    "–î—É–±—Ä–æ–≤–Ω–∏–∫": [42.6507, 18.0944],
    "–õ–∏—Å–∞–±–æ–Ω": [38.7223, -9.1393],
    "–ü–æ—Ä—Ç–æ": [41.1579, -8.6291],
    "–§–∞—Ä–æ": [37.0194, -7.9304],
    "–í–∞—Ä—à–∞–≤–∞": [52.2297, 21.0122],
    "–ö—Ä–∞–∫–æ–≤": [50.0647, 19.9450],
    "–ì–¥–∞–Ω—Å–∫": [54.3520, 18.6466],
    "–ë—É–¥–∞–ø–µ—â–∞": [47.4979, 19.0402],
    "–î–µ–±—Ä–µ—Ü–µ–Ω": [47.5316, 21.6273],
    "–¶—é—Ä–∏—Ö": [47.3769, 8.5417],
    "–ñ–µ–Ω–µ–≤–∞": [46.2044, 6.1432],
    "–ë–µ—Ä–Ω": [46.9480, 7.4474],
    "–ë—Ä—é–∫—Å–µ–ª": [50.8503, 4.3517],
    "–ë—Ä—é–∂": [51.2093, 3.2247],
    "–ê–Ω—Ç–≤–µ—Ä–ø–µ–Ω": [51.2194, 4.4025],
    "–ë—É–∫—É—Ä–µ—â": [44.4268, 26.1025],
    "–ë—Ä–∞—à–æ–≤": [45.6579, 25.6012],
    "–ö–ª—É–∂-–ù–∞–ø–æ–∫–∞": [46.7712, 23.6236],
    "–ö–æ–ø–µ–Ω—Ö–∞–≥–µ–Ω": [55.6761, 12.5683],
    "–û—Ä—Ö—É—Å": [56.1629, 10.2039],
}

CITY_IMAGES = {
    "–ë–µ—Ä–ª–∏–Ω": "https://blog.karat-s.com/wp-content/uploads/2017/04/berlin-view.jpg",
    "–ú—é–Ω—Ö–µ–Ω": "https://cdn.tripzaza.com/bg/destinations/wp-content/uploads/2018/07/Dostoprimechatelnosti-Myunhena-e1531368855353.jpg",
    "–•–∞–º–±—É—Ä–≥": "https://peika.bg/pictures/84183_715__3.jpg",
    "–ö—å–æ–ª–Ω": "https://m.netinfo.bg/media/images/50860/50860414/991-ratio-kioln.jpg",

    "–ü–∞—Ä–∏–∂": "https://blog.citylines.eu/wp-content/uploads/2019/12/%D0%90%D0%B9%D1%84%D0%B5%D0%BB%D0%BE%D0%B2%D0%B0%D1%82%D0%B0-%D0%BA%D1%83%D0%BB%D0%B0-%D0%B5-%D0%B1%D0%B5%D0%B7%D0%BC%D1%8A%D0%BB%D0%B2%D0%B5%D0%BD-%D1%81%D0%B2%D0%B8%D0%B4%D0%B5%D1%82%D0%B5%D0%BB-%D0%BD%D0%B0-%D1%85%D0%B8%D0%BB%D1%8F%D0%B4%D0%B8-%D0%BF%D1%80%D0%B5%D0%B4%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F-%D0%B7%D0%B0-%D0%B1%D1%80%D0%B0%D0%BA.jpg",
    "–õ–∏–æ–Ω": "https://sabornamegdana.com/wp/wp-content/uploads/2025/04/vieux-lyon.jpg",
    "–ú–∞—Ä—Å–∏–ª–∏—è": "https://wonders-of-europe.bg/wp-content/uploads/2017/03/rsz_shutterstock_436865629.jpg",
    "–ù–∏—Ü–∞": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRgGj_5uh0m0fsd4VdYccqRt_VbAnpokSHzcA&s",

    "–†–∏–º": "https://upload.wikimedia.org/wikipedia/commons/thumb/d/de/Colosseo_2020.jpg/1200px-Colosseo_2020.jpg",
    "–§–ª–æ—Ä–µ–Ω—Ü–∏—è": "https://suntravel.bg/f/offers/xxl/0/f314d4dc13e643d8f059ef6ee91c9113.jpg",
    "–í–µ–Ω–µ—Ü–∏—è": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQAQ-38WyZ5DXEN3VdUMVSz7huXnFRMTo8huw&s",
    "–ú–∏–ª–∞–Ω–æ": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS1y0YkR8hZLGkQmoWAtejNqyvDwWPHOqbf5g&s",

    "–ë–∞—Ä—Å–µ–ª–æ–Ω–∞": "https://webtours.bg/img/barcelona-%D0%B1%D0%B0%D1%80%D1%81%D0%B5%D0%BB%D0%BE%D0%BD%D0%B0.jpg",
    "–ú–∞–¥—Ä–∏–¥": "https://webtours.bg/img/%D0%B5%D0%BA%D1%81%D0%BA%D1%83%D1%80%D0%B7%D0%B8%D1%8F-%D0%BC%D0%B0%D0%B4%D1%80%D0%B8%D0%B4-%D0%B8%D1%81%D0%BF%D0%B0%D0%BD%D0%B8%D1%8F-%D1%83%D0%B5%D0%B1-%D1%82%D1%83%D1%80%D1%81-ekskurzia-madrid-ispania-web-tours.jpg",
    "–í–∞–ª–µ–Ω—Å–∏—è": "https://balkannomad.com/wp-content/uploads/2023/10/shutterstock_2277659335-scaled.jpg",
    "–°–µ–≤–∏–ª—è": "https://nasamnatam.com/pics/1241-bdee7ab778ed9347a1f51843366dd4ed.jpg",

    "–°–æ–ª—É–Ω": "https://neftelimov.com/wp-content/uploads/2022/10/img_7973-2-scaled.jpeg",
    "–ê—Ç–∏–Ω–∞": "https://nasamnatam.com/pics/87-175b2ee109b2e657d250f36a9ed6d301.jpg",
    "–°–∞–Ω—Ç–æ—Ä–∏–Ω–∏": "https://static.dw.com/image/57460904_605.jpg",

    "–í–∏–µ–Ω–∞": "https://images.squarespace-cdn.com/content/v1/66c2f2dd14239c0a58c52faa/bb6e1eab-3375-4343-b383-0b7873319a23/%D0%94%D0%B2%D0%BE%D1%80%D0%B5%D1%86%D1%8A%D1%82+%D0%A8%D1%8C%D0%BE%D0%BD%D0%B1%D1%80%D1%83%D0%BD+%D0%B2%D1%8A%D0%B2+%D0%92%D0%B8%D0%B5%D0%BD%D0%B0%2C+%D0%90%D0%B2%D1%81%D1%82%D1%80%D0%B8%D1%8F.jpgy",
    "–ó–∞–ª—Ü–±—É—Ä–≥": "https://freshholiday.bg/img/NOVINI/BIG_5662_715__1738079265317.jpg",
    "–ò–Ω—Å–±—Ä—É–∫": "https://r-xx.bstatic.com/xdata/images/city/608x352/684028.webp?k=6e08ae5bad77cf17e69b5dd8e3d4c87c8fef704a0a787f4ef71f6563e5e4ff11&o=",

    "–ü—Ä–∞–≥–∞": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRHhmkTdrgvhuHa-knUKrsMKCEFopeKyiiw9g&s",
    "–ë—ä—Ä–Ω–æ": "https://momichetata.com/media/source/201907/1563960967_brno_1.jpg",

    "–ê–º—Å—Ç–µ—Ä–¥–∞–º": "https://balkannomad.com/wp-content/uploads/2024/09/shutterstock_642423370-scaled.jpg",
    "–†–æ—Ç–µ—Ä–¥–∞–º": "https://static.dir.bg/uploads/images/2022/09/13/2393679/1366x768.jpg?_=1663075994",

    "–°—Ç–æ–∫—Ö–æ–ª–º": "https://www.e-tours.bg/images/stockholm/c-fakepath-stocholm-3.jpg",
    "–ì—å–æ—Ç–µ–±–æ—Ä–≥": "https://upload.wikimedia.org/wikipedia/commons/9/97/G%C3%B6teborg_2503_stitch_%2828573994096%29.jpg",

    "–ó–∞–≥—Ä–µ–±": "https://freshholiday.bg/img/NOVINI/BIG_Zagreb_09.14_1702660819212.jpg.webp",
    "–°–ø–ª–∏—Ç": "https://upload.wikimedia.org/wikipedia/commons/a/ab/Split_080620-133710-IMG_0968x.jpg",
    "–î—É–±—Ä–æ–≤–Ω–∏–∫": "https://freshholiday.bg/img/NOVINI/BIG_dubrovnik_1717999865257.jpg.webp",

    "–õ–∏—Å–∞–±–æ–Ω": "https://cdn2.bohemia.bg/touristsites/849164/LRWA53.jpg",
    "–ü–æ—Ä—Ç–æ": "https://cdn2.bohemia.bg/touristsites/771171/R6LUNA.jpg",
    "–§–∞—Ä–æ": "https://p1.elle.bg/i/s/istock-653375294-123294-1140x0.jpg",

    "–í–∞—Ä—à–∞–≤–∞": "https://www.e-tours.bg/images/Warsaw/c-fakepath-old-town-3.jpg",
    "–ö—Ä–∞–∫–æ–≤": "https://upload.wikimedia.org/wikipedia/commons/a/a3/Krakow_Rynek_Glowny_panorama_2.jpg",
    "–ì–¥–∞–Ω—Å–∫": "https://cdn2.bohemia.bg/touristsites/176108/8RZBFV.jpg",

    "–ë—É–¥–∞–ø–µ—â–∞": "https://savetite.com/wp-content/uploads/2023/09/budapeshta-zabelejitelnosti.jpg",
    "–î–µ–±—Ä–µ—Ü–µ–Ω": "https://upload.wikimedia.org/wikipedia/commons/0/0f/DebrecenUniversity3.jpg",

    "–¶—é—Ä–∏—Ö": "https://cdn.tripzaza.com/bg/destinations/wp-content/uploads/2018/07/Dostoprimechatelnosti-TSyuriha-e1531466241421.jpg",
    "–ñ–µ–Ω–µ–≤–∞": "https://cdn2.bohemia.bg/touristsites/545735/UNJYNA.jpg",
    "–ë–µ—Ä–Ω": "https://peika.bg/pictures/79736_715_.jpg",

    "–ë—Ä—é–∫—Å–µ–ª": "https://i0.wp.com/bulgarianontheroad.com/wp-content/uploads/2024/12/img_4991-min-1.jpg?fit=1200%2C900&ssl=1",
    "–ë—Ä—é–∂": "https://upload.wikimedia.org/wikipedia/commons/8/8f/Bruggewasser.jpg",
    "–ê–Ω—Ç–≤–µ—Ä–ø–µ–Ω": "https://upload.wikimedia.org/wikipedia/commons/3/38/Amberes%3B_vistas_MAS_2.jpg",

    "–ë—É–∫—É—Ä–µ—â": "https://balkannomad.com/wp-content/uploads/2025/08/shutterstock_2467711837-scaled.jpg",
    "–ë—Ä–∞—à–æ–≤": "https://freshholiday.bg/img/NOVINI/BIG_brasov-romania_1709040104232.jpg.webp",
    "–ö–ª—É–∂-–ù–∞–ø–æ–∫–∞": "https://upload.wikimedia.org/wikipedia/commons/7/78/CJROCluj-Napoca_19.jpg",

    "–ö–æ–ø–µ–Ω—Ö–∞–≥–µ–Ω": "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRXOFPiXwF0rSWZ-6yJWH8Tupxx1_bgnNjv7g&s",
    "–û—Ä—Ö—É—Å": "https://foxiepass.com/blog/uploads/public/20240723/aarhus2_oZ09Fo.jpg",
}


CITY_RECOMMENDATIONS = {
    "–ë–µ—Ä–ª–∏–Ω": "–ë—Ä–∞–Ω–¥–µ–Ω–±—É—Ä–≥—Å–∫–∞—Ç–∞ –≤—Ä–∞—Ç–∞ –∏ –ú—É–∑–µ–π–Ω–∏—è –æ—Å—Ç—Ä–æ–≤",
    "–ú—é–Ω—Ö–µ–Ω": "—Ä–∞–∑—Ö–æ–¥–∫–∞ –≤ –ú–∞—Ä–∏–µ–Ω–ø–ª–∞—Ü –∏ –ê–Ω–≥–ª–∏–π—Å–∫–∞—Ç–∞ –≥—Ä–∞–¥–∏–Ω–∞",
    "–•–∞–º–±—É—Ä–≥": "–ø—Ä–∏—Å—Ç–∞–Ω–∏—â–µ—Ç–æ –∏ –∫–≤–∞—Ä—Ç–∞–ª –®–ø–∞–π—Ö–µ—Ä—â–∞–¥",
    "–ö—å–æ–ª–Ω": "–ö—å–æ–ª–Ω—Å–∫–∞—Ç–∞ –∫–∞—Ç–µ–¥—Ä–∞–ª–∞",

    "–ü–∞—Ä–∏–∂": "–ê–π—Ñ–µ–ª–æ–≤–∞—Ç–∞ –∫—É–ª–∞ –∏ —Ä–∞–∑—Ö–æ–¥–∫–∞ –∫—Ä–∞–π –°–µ–Ω–∞",
    "–õ–∏–æ–Ω": "—Å—Ç–∞—Ä–∏—è –≥—Ä–∞–¥ (Vieux Lyon)",
    "–ú–∞—Ä—Å–∏–ª–∏—è": "—Å—Ç–∞—Ä–æ—Ç–æ –ø—Ä–∏—Å—Ç–∞–Ω–∏—â–µ (Vieux-Port)",
    "–ù–∏—Ü–∞": "–∫—Ä–∞–π–±—Ä–µ–∂–Ω–∞—Ç–∞ –∞–ª–µ—è Promenade des Anglais",

    "–†–∏–º": "–ö–æ–ª–∏–∑–µ—É–º–∞ –∏ –§–æ—Ä—É–º–∞",
    "–§–ª–æ—Ä–µ–Ω—Ü–∏—è": "–∫–∞—Ç–µ–¥—Ä–∞–ª–∞—Ç–∞ Santa Maria del Fiore",
    "–í–µ–Ω–µ—Ü–∏—è": "–ø–ª–æ—â–∞–¥ –°–∞–Ω –ú–∞—Ä–∫–æ –∏ —Ä–∞–∑—Ö–æ–¥–∫–∞ —Å –≥–æ–Ω–¥–æ–ª–∞",
    "–ú–∏–ª–∞–Ω–æ": "–∫–∞—Ç–µ–¥—Ä–∞–ª–∞—Ç–∞ –î—É–æ–º–æ",

    "–ë–∞—Ä—Å–µ–ª–æ–Ω–∞": "–°–∞–≥—Ä–∞–¥–∞ –§–∞–º–∏–ª–∏—è",
    "–ú–∞–¥—Ä–∏–¥": "–ö—Ä–∞–ª—Å–∫–∏—è –¥–≤–æ—Ä–µ—Ü",
    "–í–∞–ª–µ–Ω—Å–∏—è": "–ì—Ä–∞–¥–∞ –Ω–∞ –∏–∑–∫—É—Å—Ç–≤–∞—Ç–∞ –∏ –Ω–∞—É–∫–∏—Ç–µ",
    "–°–µ–≤–∏–ª—è": "–ø–ª–æ—â–∞–¥ –ò—Å–ø–∞–Ω–∏—è",

    "–°–æ–ª—É–Ω": "–ë—è–ª–∞—Ç–∞ –∫—É–ª–∞",
    "–ê—Ç–∏–Ω–∞": "–ê–∫—Ä–æ–ø–æ–ª–∞",
    "–°–∞–Ω—Ç–æ—Ä–∏–Ω–∏": "–∑–∞–ª–µ–∑–∞ –≤ –ò—è",

    "–í–∏–µ–Ω–∞": "–¥–≤–æ—Ä–µ—Ü–∞ –®—å–æ–Ω–±—Ä—É–Ω",
    "–ó–∞–ª—Ü–±—É—Ä–≥": "–∫—ä—â–∞—Ç–∞ –Ω–∞ –ú–æ—Ü–∞—Ä—Ç",
    "–ò–Ω—Å–±—Ä—É–∫": "–ó–ª–∞—Ç–Ω–∏—è –ø–æ–∫—Ä–∏–≤",

    "–ü—Ä–∞–≥–∞": "–ö–∞—Ä–ª–æ–≤–∏—è –º–æ—Å—Ç",
    "–ë—ä—Ä–Ω–æ": "–∑–∞–º—ä–∫–∞ –®–ø–∏–ª–±–µ—Ä–∫",

    "–ê–º—Å—Ç–µ—Ä–¥–∞–º": "–∫–∞–Ω–∞–ª–∏—Ç–µ –∏ –∫—ä—â–∞—Ç–∞ –Ω–∞ –ê–Ω–µ –§—Ä–∞–Ω–∫",
    "–†–æ—Ç–µ—Ä–¥–∞–º": "–º–æ–¥–µ—Ä–Ω–∞—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –∫—É–±–∏—á–Ω–∏—Ç–µ –∫—ä—â–∏",

    "–°—Ç–æ–∫—Ö–æ–ª–º": "—Å—Ç–∞—Ä–∏—è –≥—Ä–∞–¥ –ì–∞–º–ª–∞ –°—Ç–∞–Ω",
    "–ì—å–æ—Ç–µ–±–æ—Ä–≥": "–∫—Ä–∞–π–±—Ä–µ–∂–∏–µ—Ç–æ –∏ –∞—Ä—Ö–∏–ø–µ–ª–∞–≥–∞",

    "–ó–∞–≥—Ä–µ–±": "—Å—Ç–∞—Ä–∏—è –≥—Ä–∞–¥ –ì–æ—Ä–Ω–∏ –≥—Ä–∞–¥",
    "–°–ø–ª–∏—Ç": "–¥–≤–æ—Ä–µ—Ü–∞ –Ω–∞ –î–∏–æ–∫–ª–µ—Ü–∏–∞–Ω",
    "–î—É–±—Ä–æ–≤–Ω–∏–∫": "—Ä–∞–∑—Ö–æ–¥–∫–∞ –ø–æ –≥—Ä–∞–¥—Å–∫–∏—Ç–µ —Å—Ç–µ–Ω–∏",

    "–õ–∏—Å–∞–±–æ–Ω": "–∫–≤–∞—Ä—Ç–∞–ª –ê–ª—Ñ–∞–º–∞",
    "–ü–æ—Ä—Ç–æ": "–¥–µ–≥—É—Å—Ç–∞—Ü–∏—è –Ω–∞ –ø–æ—Ä—Ç–≤–∞–π–Ω –∫—Ä–∞–π —Ä–µ–∫–∞—Ç–∞",
    "–§–∞—Ä–æ": "–ª–∞–≥—É–Ω–∞—Ç–∞ –†–∏–∞ –§–æ—Ä–º–æ–∑–∞",

    "–í–∞—Ä—à–∞–≤–∞": "—Å—Ç–∞—Ä–∏—è –≥—Ä–∞–¥",
    "–ö—Ä–∞–∫–æ–≤": "–ø–ª–æ—â–∞–¥–∞ –†–∏–Ω–µ–∫ –ì–ª–∞–≤–Ω–∏",
    "–ì–¥–∞–Ω—Å–∫": "—Å—Ç–∞—Ä–æ—Ç–æ –ø—Ä–∏—Å—Ç–∞–Ω–∏—â–µ",

    "–ë—É–¥–∞–ø–µ—â–∞": "–ü–∞—Ä–ª–∞–º–µ–Ω—Ç–∞ –∏ –±–∞–Ω–∏—Ç–µ –°–µ—á–µ–Ω–∏",
    "–î–µ–±—Ä–µ—Ü–µ–Ω": "–ì–æ–ª—è–º–∞—Ç–∞ —Ä–µ—Ñ–æ—Ä–º–∞—Ç–æ—Ä—Å–∫–∞ —Ü—ä—Ä–∫–≤–∞",

    "–¶—é—Ä–∏—Ö": "—Ä–∞–∑—Ö–æ–¥–∫–∞ –∫—Ä–∞–π –µ–∑–µ—Ä–æ—Ç–æ",
    "–ñ–µ–Ω–µ–≤–∞": "—Ñ–æ–Ω—Ç–∞–Ω–∞ Jet d‚ÄôEau",
    "–ë–µ—Ä–Ω": "—Å—Ç–∞—Ä–∏—è –≥—Ä–∞–¥ (UNESCO)",

    "–ë—Ä—é–∫—Å–µ–ª": "–ì—Ä–∞–Ω –ü–ª–∞—Å",
    "–ë—Ä—é–∂": "—Å—Ä–µ–¥–Ω–æ–≤–µ–∫–æ–≤–Ω–∏—Ç–µ –∫–∞–Ω–∞–ª–∏",
    "–ê–Ω—Ç–≤–µ—Ä–ø–µ–Ω": "–∫–∞—Ç–µ–¥—Ä–∞–ª–∞—Ç–∞ –∏ –¥–∏–∞–º–∞–Ω—Ç–µ–Ω–∏—è –∫–≤–∞—Ä—Ç–∞–ª",

    "–ë—É–∫—É—Ä–µ—â": "–î–≤–æ—Ä–µ—Ü–∞ –Ω–∞ –ø–∞—Ä–ª–∞–º–µ–Ω—Ç–∞",
    "–ë—Ä–∞—à–æ–≤": "–ß–µ—Ä–Ω–∞—Ç–∞ —Ü—ä—Ä–∫–≤–∞",
    "–ö–ª—É–∂-–ù–∞–ø–æ–∫–∞": "—Ü–µ–Ω—Ç—Ä–∞–ª–Ω–∏—è –ø–ª–æ—â–∞–¥",

    "–ö–æ–ø–µ–Ω—Ö–∞–≥–µ–Ω": "–ù—é—Ö–∞–≤–Ω",
    "–û—Ä—Ö—É—Å": "–º—É–∑–µ—è ARoS"
}

HOTEL_PRICES = {
    "üè† –ë—é–¥–∂–µ—Ç–µ–Ω —Ö–æ—Ç–µ–ª": 60,
    "üè® –ö–æ–º—Ñ–æ—Ä—Ç–µ–Ω —Ö–æ—Ç–µ–ª": 100,
    "üè∞ –õ—É–∫—Å–æ–∑–µ–Ω —Ö–æ—Ç–µ–ª": 170,
}

DISTANCE_BETWEEN_CITIES = 300

# ================== TRANSPORT ==================

class Transport(ABC):
    def __init__(self, price_per_km, speed):
        self.price_per_km = price_per_km
        self.speed = speed

    def travel_cost(self, distance):
        return distance * self.price_per_km

    def travel_time(self, distance):
        return distance / self.speed

    @abstractmethod
    def name(self):
        pass

class Car(Transport):
    def __init__(self):
        super().__init__(0.25, 80)
    def name(self):
        return "üöó –ö–æ–ª–∞"

class Train(Transport):
    def __init__(self):
        super().__init__(0.18, 110)
    def name(self):
        return "üöÜ –í–ª–∞–∫"

class Plane(Transport):
    def __init__(self):
        super().__init__(0.45, 600)
    def name(self):
        return "‚úàÔ∏è –°–∞–º–æ–ª–µ—Ç"

# ================== UI ==================

st.title("üåç –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–µ–Ω —Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏ –ø–ª–∞–Ω–µ—Ä")
st.caption("–ó–∞–ø–æ—á–Ω–∏ –æ—Ç –ë—ä–ª–≥–∞—Ä–∏—è –∏ –∏–∑–≥—Ä–∞–¥–∏ —Å–≤–æ—è—Ç–∞ –∏–¥–µ–∞–ª–Ω–∞ –µ–≤—Ä–æ–ø–µ–π—Å–∫–∞ –ø–æ—á–∏–≤–∫–∞")

st.sidebar.header("üß≠ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞ –ø—ä—Ç—É–≤–∞–Ω–µ—Ç–æ")

country = st.sidebar.selectbox(
    "üåê –ò–∑–±–µ—Ä–∏ –¥—ä—Ä–∂–∞–≤–∞ –∑–∞ –ø–æ—Å–µ—â–µ–Ω–∏–µ",
    list(DESTINATIONS.keys())
)

max_cities = len(DESTINATIONS[country])

num_cities = st.sidebar.slider(
    "üèôÔ∏è –ö–æ–ª–∫–æ –≥—Ä–∞–¥–∞ –∏—Å–∫–∞—à –¥–∞ –ø–æ—Å–µ—Ç–∏—à?",
    1,
    max_cities,
    min(3, max_cities)
)

transport_choice = st.sidebar.radio(
    "üöò –ö–∞–∫ —â–µ –ø—ä—Ç—É–≤–∞—à?",
    ["–ö–æ–ª–∞", "–í–ª–∞–∫", "–°–∞–º–æ–ª–µ—Ç"]
)

hotel_type = st.sidebar.radio(
    "üõèÔ∏è –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–Ω —Ç–∏–ø –Ω–∞—Å—Ç–∞–Ω—è–≤–∞–Ω–µ",
    list(HOTEL_PRICES.keys())
)

days = st.sidebar.slider("üìÜ –ü—Ä–æ–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ—Å—Ç (–¥–Ω–∏)", 2, 21, 7)
budget = st.sidebar.number_input("üí∞ –¢–≤–æ—è—Ç –±—é–¥–∂–µ—Ç (–ª–≤)", 500, 25000, 4000)

plan = st.sidebar.button("üß≠ –ü–ª–∞–Ω–∏—Ä–∞–π –ø—ä—Ç—É–≤–∞–Ω–µ—Ç–æ")

# ================== PLANNING ==================

if plan:
    selected_cities = ["–°–æ—Ñ–∏—è"] + [
        city for city, _ in DESTINATIONS[country][:num_cities]
    ]

    st.subheader("üó∫Ô∏è –¢–≤–æ—è—Ç –º–∞—Ä—à—Ä—É—Ç")
    st.markdown(" ** ‚û°Ô∏è ".join(selected_cities) + "**")

    # ================== MAP ==================

    points = pd.DataFrame([
        {"lat": CITY_COORDS[c][0], "lon": CITY_COORDS[c][1]}
        for c in selected_cities
    ])

    lines = pd.DataFrame([
        {
            "from_lon": CITY_COORDS[selected_cities[i]][1],
            "from_lat": CITY_COORDS[selected_cities[i]][0],
            "to_lon": CITY_COORDS[selected_cities[i+1]][1],
            "to_lat": CITY_COORDS[selected_cities[i+1]][0],
        }
        for i in range(len(selected_cities)-1)
    ])

    deck = pdk.Deck(
        layers=[
            pdk.Layer(
                "LineLayer",
                data=lines,
                get_source_position="[from_lon, from_lat]",
                get_target_position="[to_lon, to_lat]",
                get_color=[215, 38, 61],
                get_width=4
            ),
            pdk.Layer(
                "ScatterplotLayer",
                data=points,
                get_position="[lon, lat]",
                get_radius=900,
                radius_min_pixels=4,
                radius_max_pixels=10,
                get_fill_color=[50, 130, 200],
                pickable=True
            ),
        ],
        initial_view_state=pdk.ViewState(
            latitude=points["lat"].mean(),
            longitude=points["lon"].mean(),
            zoom=4
        )
    )

    st.pydeck_chart(deck)

    # ================== DETAILS ==================

    st.subheader("üìç –ì—Ä–∞–¥–æ–≤–µ –∏ –ø—Ä–µ–∂–∏–≤—è–≤–∞–Ω–∏—è")

    hotel_price = HOTEL_PRICES[hotel_type]
    food_price = 30

    total_food = 0
    total_hotel = 0
    
    for city in selected_cities[1:]:
        food = next(food for c, food in DESTINATIONS[country] if c == city)
    
        with st.expander(city):
            if city in CITY_IMAGES:
                st.image(CITY_IMAGES[city], use_column_width=True)

            st.write(f"üè® **{hotel_type}:** {hotel_price} –ª–≤ / –Ω–æ—â")
            st.write(f"üçΩÔ∏è **–¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–∞ —Ö—Ä–∞–Ω–∞:** {food}")
            recommendation = CITY_RECOMMENDATIONS.get(city, "—Ä–∞–∑—Ö–æ–¥–∫–∞ –∏ –æ–ø–æ–∑–Ω–∞–≤–∞–Ω–µ –Ω–∞ –≥—Ä–∞–¥–∞")
            st.write(f"üèõÔ∏è **–ü—Ä–µ–ø–æ—Ä—ä–∫–∞:** {recommendation}")


        total_food += food_price * days
        total_hotel += hotel_price * days


    # ================== SUMMARY ==================

    transport = Car() if transport_choice == "–ö–æ–ª–∞" else Train() if transport_choice == "–í–ª–∞–∫" else Plane()

    distance = DISTANCE_BETWEEN_CITIES * (len(selected_cities) - 1)
    total_cost = total_food + total_hotel + transport.travel_cost(distance)

    st.subheader("üí∞ –û–±–æ–±—â–µ–Ω–∏–µ")

    st.write(f"{transport.name()} ‚Äì {transport.travel_cost(distance):.2f} –ª–≤")
    st.write(f"üè® –ù–∞—Å—Ç–∞–Ω—è–≤–∞–Ω–µ: {total_hotel:.2f} –ª–≤")
    st.write(f"üçΩÔ∏è –•—Ä–∞–Ω–∞: {total_food:.2f} –ª–≤")

    st.markdown("---")
    st.markdown(f"## üíµ –û–±—â–∞ —Å—É–º–∞: **{total_cost:.2f} –ª–≤**")

    if total_cost <= budget:
        st.success("‚úÖ –ü—ä—Ç—É–≤–∞–Ω–µ—Ç–æ –µ –≤ —Ä–∞–º–∫–∏—Ç–µ –Ω–∞ –±—é–¥–∂–µ—Ç–∞")
    else:
        st.error("‚ùå –ù–∞–¥–≤–∏—à–∞–≤–∞ –±—é–¥–∂–µ—Ç–∞")

    st.info(f"üé≤ –°–ª—É—á–∞–π–Ω–æ —Å—ä–±–∏—Ç–∏–µ: {random.choice(['üéâ –§–µ—Å—Ç–∏–≤–∞–ª', 'üåßÔ∏è –î—ä–∂–¥–æ–≤–µ–Ω –¥–µ–Ω', 'üí∏ –ù–µ–æ—á–∞–∫–≤–∞–Ω–∞ –æ—Ç—Å—Ç—ä–ø–∫–∞'])}")
